# Sistema de Gesti√≥n Hotelera - DM Hotel üè®

## üìù Descripci√≥n 
Sistema completo de gesti√≥n hotelera desarrollado para el curso **Integrador de Sistemas II**. Plataforma fullstack que gestiona reservas, habitaciones, usuarios, cupones de descuento, estad√≠sticas y pagos. Incluye funcionalidades avanzadas como reportes PDF, sistema de cupones, notificaciones por email y dashboard administrativo con gr√°ficos estad√≠sticos.

## ‚ú® Caracter√≠sticas Principales

### üéØ Para Clientes
- **Registro y autenticaci√≥n** con JWT
- **B√∫squeda y filtrado** de habitaciones por sede, tipo y disponibilidad
- **Sistema de reservas** con c√°lculo autom√°tico de precios
- **Aplicaci√≥n de cupones** de descuento (porcentaje o monto fijo)
- **Gesti√≥n de perfil** personal
- **Historial de reservas** con estados (Pendiente, Check-In, Check-Out, Cancelada)
- **Cancelaci√≥n** de reservas pendientes

### üëî Para Administradores
- **Dashboard completo** con estad√≠sticas en tiempo real
- **Gesti√≥n de usuarios** y roles (Admin, Cliente, Empleado)
- **Administraci√≥n de sedes** hoteleras
- **Gesti√≥n de tipos de habitaciones** con m√∫ltiples im√°genes
- **Control de habitaciones** por sede con precios y disponibilidad
- **Sistema de cupones**:
  - Creaci√≥n y gesti√≥n de cupones
  - Asignaci√≥n masiva a usuarios
  - Validaci√≥n autom√°tica y control de usos
  - Notificaci√≥n por email
- **Reportes y estad√≠sticas**:
  - Gr√°ficos de reservas por estado
  - Ingresos por tipo de habitaci√≥n
  - Ocupaci√≥n por sede
  - Ingresos mensuales
  - **Exportaci√≥n a PDF** con gr√°ficos integrados
- **Gesti√≥n avanzada de reservas**

## üõ† Stack Tecnol√≥gico

### üîß Backend
| Tecnolog√≠a | Versi√≥n | Uso |
|------------|---------|-----|
| **Python** | 3.x | Lenguaje principal |
| **Django** | 5.2.3 | Framework web |
| **Django REST Framework** | Latest | API REST |
| **SimpleJWT** | Latest | Autenticaci√≥n JWT |
| **SQLite** | - | Base de datos (desarrollo) |
| **django-cors-headers** | Latest | Manejo de CORS |
| **Matplotlib** | Latest | Generaci√≥n de gr√°ficos |
| **xhtml2pdf** | Latest | Generaci√≥n de reportes PDF |

### ‚öõÔ∏è Frontend
| Tecnolog√≠a | Versi√≥n | Uso |
|------------|---------|-----|
| **React** | 19.1.0 | Framework frontend |
| **Vite** | 7.0.0 | Build tool y bundler |
| **React Router** | 7.6.3 | Enrutamiento SPA |
| **Axios** | 1.10.0 | Cliente HTTP |
| **Bootstrap** | 5.3.7 | Framework CSS |
| **React Bootstrap** | 2.10.10 | Componentes React-Bootstrap |
| **Chart.js** | 4.5.0 | Gr√°ficos interactivos |
| **React Hot Toast** | 2.5.2 | Notificaciones |
| **React Icons** | 5.5.0 | Iconograf√≠a |
| **React DatePicker** | 8.4.0 | Selecci√≥n de fechas |
| **PayPal SDK** | 8.2.0 | Integraci√≥n de pagos |

### üîí Integraci√≥n de Pagos
- **PayPal SDK** configurado en modo sandbox
- Procesamiento seguro de pagos
- Confirmaci√≥n autom√°tica de reservas

### üìß Sistema de Notificaciones
- **SMTP Gmail** configurado
- Templates HTML personalizados
- Notificaciones autom√°ticas de cupones

## üöÄ Instalaci√≥n y Configuraci√≥n

### üî¥ Prerrequisitos
- **Python 3.8+**
- **Node.js 18+** y npm/yarn
- **Git**

### üíª Instalaci√≥n del Backend (Django)

```bash
# 1. Clonar el repositorio
git clone <tu-repositorio>
cd "Proyecto Hotel Fullstack"

# 2. Crear entorno virtual
python -m venv venv

# 3. Activar entorno virtual
# En Windows:
venv\Scripts\activate
# En macOS/Linux:
source venv/bin/activate

# 4. Instalar dependencias (crear requirements.txt si no existe)
cd Backend/proyectHotel
pip install django djangorestframework djangorestframework-simplejwt
pip install django-cors-headers matplotlib xhtml2pdf

# 5. Ejecutar migraciones
python manage.py makemigrations
python manage.py migrate

# 6. Crear superusuario (opcional)
python manage.py createsuperuser

# 7. Ejecutar servidor de desarrollo
python manage.py runserver
```

### ‚öõÔ∏è Instalaci√≥n del Frontend (React)

```bash
# 1. Navegar al directorio del frontend
cd Frontend/Hotel

# 2. Instalar dependencias
npm install
# o con yarn:
yarn install

# 3. Ejecutar servidor de desarrollo
npm run dev
# o con yarn:
yarn dev
```

### ‚öôÔ∏è Configuraci√≥n Adicional

#### Variables de Entorno (Backend)
Configura las siguientes variables en `settings.py`:

```python
# Email (Gmail SMTP)
EMAIL_HOST_USER = 'tu-email@gmail.com'
EMAIL_HOST_PASSWORD = 'tu-app-password'

# PayPal
PAYPAL_CLIENT_ID = 'tu-paypal-client-id'
PAYPAL_SECRET = 'tu-paypal-secret'
```

#### Puertos por Defecto
- **Backend Django**: `http://localhost:8000`
- **Frontend React**: `http://localhost:5173`

## üß™ Testing

### Ejecutar Tests del Backend
```bash
cd Backend/proyectHotel
python manage.py test appHotel.tests
```

El proyecto incluye tests unitarios para:
- Modelos de Usuario, Sede, Habitaci√≥n, Reserva, Cup√≥n
- Validaciones de negocio
- Casos de uso principales

## üåê API REST - Documentaci√≥n Completa

### üîê Autenticaci√≥n JWT
| M√©todo | Endpoint               | Descripci√≥n                  | Acceso   |
|--------|------------------------|------------------------------|----------|
| POST   | `/api/token/`          | Obtener token JWT            | P√∫blico  |
| POST   | `/api/token/refresh/`  | Refrescar token              | P√∫blico  |

### üìã Endpoints Principales

#### üìç Gesti√≥n B√°sica
| Verbo  | Endpoint                          | Descripci√≥n                     | Permisos       |
|--------|-----------------------------------|---------------------------------|----------------|
| GET    | `/api/sedes/`                     | Listar sedes                    | P√∫blico        |
| POST   | `/api/sedes/`                     | Crear sede                      | Admin          |
| GET    | `/api/tipoHabitaciones/`          | Listar tipos de habitaciones    | P√∫blico        |
| POST   | `/api/tipoHabitaciones/`          | Crear tipo de habitaci√≥n        | Admin          |

#### üíº Gesti√≥n de Usuarios
| Verbo  | Endpoint                          | Descripci√≥n                     | Permisos       |
|--------|-----------------------------------|---------------------------------|----------------|
| GET    | `/api/cliente/usuario/`           | Perfil del cliente              | Cliente        |
| PUT    | `/api/cliente/usuario/{id}/`      | Actualizar perfil               | Cliente (Owner)|
| POST   | `/api/cliente/usuario/`           | Registro de cliente             | P√∫blico        |
| GET    | `/api/admin/usuario/`             | Listar usuarios (admin)         | Admin          |
| POST   | `/api/admin/usuario/`             | Crear usuario (admin)           | Admin          |
| GET    | `/api/admin/usuario/reservas-stats/` | Estad√≠sticas de usuarios      | Admin          |

#### üè® Habitaciones
| Verbo  | Endpoint                          | Descripci√≥n                     | Permisos       |
|--------|-----------------------------------|---------------------------------|----------------|
| GET    | `/api/cliente/habitaciones/`      | Listar habitaciones (cliente)   | P√∫blico        |
| GET    | `/api/admin/habitaciones/`        | Listar habitaciones (admin)     | Admin          |
| POST   | `/api/admin/habitaciones/`        | Crear habitaci√≥n               | Admin          |
| PUT    | `/api/admin/habitaciones/{id}/`   | Actualizar habitaci√≥n          | Admin          |
| DELETE | `/api/admin/habitaciones/{id}/`   | Eliminar habitaci√≥n            | Admin          |

#### üìã Reservas
| Verbo  | Endpoint                          | Descripci√≥n                     | Permisos       |
|--------|-----------------------------------|---------------------------------|----------------|
| GET    | `/api/reservas/`                  | Listar reservas                 | Cliente        |
| POST   | `/api/reservas/`                  | Crear reserva                   | Cliente        |
| GET    | `/api/reservas/mis_reservas/`     | Mis reservas                    | Cliente        |
| PATCH  | `/api/reservas/{id}/cancelar/`    | Cancelar reserva                | Cliente        |
| POST   | `/api/reserva/confirmar-pago/`    | Confirmar pago y crear reserva  | Cliente        |

#### üéüÔ∏è Sistema de Cupones
| Verbo  | Endpoint                          | Descripci√≥n                     | Permisos       |
|--------|-----------------------------------|---------------------------------|----------------|
| GET    | `/api/cupones/`                   | Listar cupones                  | Admin          |
| POST   | `/api/cupones/`                   | Crear cup√≥n                     | Admin          |
| GET    | `/api/cupones/validar/`           | Validar cup√≥n                   | Cliente        |
| POST   | `/api/cupones/asignar_masivo/`    | Asignar cup√≥n a usuarios        | Admin          |
| POST   | `/api/cupones/asignar_existente/` | Asignar cup√≥n existente         | Admin          |
| GET    | `/api/cupones-usuario/`           | Cupones del usuario             | Cliente        |
| POST   | `/api/cupones-usuario/{id}/marcar_como_usado/` | Marcar cup√≥n usado | Cliente |

#### üìà Reportes y Estad√≠sticas
| Verbo  | Endpoint                          | Descripci√≥n                     | Permisos       |
|--------|-----------------------------------|---------------------------------|----------------|
| POST   | `/api/generar-reporte/`           | Generar reporte PDF con gr√°ficos | Admin        |

### üìå Estructura del Router DRF
```python
# Configuraci√≥n de endpoints principales
from rest_framework.routers import DefaultRouter
from appHotel.api.views import (
    SedeViewSet, AdminUsuarioViewSet, TipoHabitacionViewSet,
    ClienteUsuarioViewSet, AdminHabitacionViewSet,
    ClienteHabitacionViewSet, ReservaViewSet,
    CuponUsuarioViewSet, CuponViewSet
)

router = DefaultRouter()
router.register(r'sedes', SedeViewSet)
router.register(r'tipoHabitaciones', TipoHabitacionViewSet)
router.register(r'cliente/usuario', ClienteUsuarioViewSet)
router.register(r'admin/usuario', AdminUsuarioViewSet)
router.register(r'cliente/habitaciones', ClienteHabitacionViewSet)
router.register(r'admin/habitaciones', AdminHabitacionViewSet)
router.register(r'reservas', ReservaViewSet)
router.register(r'cupones', CuponViewSet)
router.register(r'cupones-usuario', CuponUsuarioViewSet)
```

## üìä Modelos de Datos

### üìÑ Principales Entidades

- **Usuario**: Sistema de autenticaci√≥n personalizado con roles (Admin, Cliente, Empleado)
- **Sede**: Diferentes ubicaciones de la cadena hotelera
- **TipoHabitacion**: Categor√≠as de habitaciones con im√°genes m√∫ltiples
- **Habitacion**: Habitaciones individuales por sede con precios
- **Reserva**: Gestiona el ciclo completo de reservas con estados
- **Cupon**: Sistema de descuentos con tipos porcentaje/fijo
- **CuponUsuario**: Relaci√≥n entre cupones y usuarios con control de uso

### üîó Relaciones Principales
- Usuario 1:N Reservas
- Habitacion N:1 Sede
- Habitacion N:1 TipoHabitacion
- Reserva N:1 Habitacion
- Cupon N:M Usuario (a trav√©s de CuponUsuario)

## üì± Interfaz de Usuario

### üéÜ Componentes Principales

#### Para Clientes
- **Registro/Login**: Autenticaci√≥n JWT
- **B√∫squeda de Habitaciones**: Filtros avanzados
- **Proceso de Reserva**: Paso a paso con validaci√≥n
- **Mis Reservas**: Historial y gesti√≥n
- **Perfil de Usuario**: Edici√≥n de datos personales

#### Para Administradores
- **Dashboard**: Estad√≠sticas en tiempo real con Chart.js
- **Gesti√≥n de Habitaciones**: CRUD completo
- **Administraci√≥n de Cupones**: Creaci√≥n y asignaci√≥n masiva
- **Reportes**: Generaci√≥n de PDFs con gr√°ficos
- **Estad√≠sticas de Reservas**: An√°lisis detallado

## üìä Funcionalidades Avanzadas

### üéüÔ∏è Sistema de Cupones
- **Tipos de descuento**: Porcentaje o monto fijo
- **Validaci√≥n temporal**: Fechas de inicio y fin
- **Control de usos**: L√≠mite de usos por cup√≥n
- **Asignaci√≥n dirigida**: A usuarios espec√≠ficos
- **Notificaciones**: Env√≠o autom√°tico por email

### üìà Sistema de Reportes
- **Gr√°ficos interactivos**: Chart.js para visualizaci√≥n web
- **Exportaci√≥n PDF**: Reportes con gr√°ficos integrados usando matplotlib
- **Filtros din√°micos**: Por sede, tipo de habitaci√≥n, periodo
- **M√©tricas clave**: Ocupaci√≥n, ingresos, tendencias

### üîí Seguridad
- **Autenticaci√≥n JWT**: Tokens seguros con expiraci√≥n
- **Roles y permisos**: Control granular de acceso
- **Validaci√≥n de datos**: En frontend y backend
- **CORS configurado**: Para desarrollo y producci√≥n

## üó∫Ô∏è Arquitectura del Proyecto

```
Proyecto Hotel Fullstack/
‚îú‚îÄ‚îÄ Backend/
‚îÇ   ‚îî‚îÄ‚îÄ proyectHotel/
‚îÇ       ‚îú‚îÄ‚îÄ appHotel/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ api/              # API REST
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ models.py         # Modelos de datos
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ tests/            # Tests unitarios
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ templates/        # Templates HTML
‚îÇ       ‚îî‚îÄ‚îÄ proyectHotel/
‚îÇ           ‚îî‚îÄ‚îÄ settings.py       # Configuraci√≥n Django
‚îî‚îÄ‚îÄ Frontend/
    ‚îî‚îÄ‚îÄ Hotel/
        ‚îú‚îÄ‚îÄ src/
        ‚îÇ   ‚îú‚îÄ‚îÄ components/       # Componentes React
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Admin/        # Panel administrativo
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cliente/      # Interfaz cliente
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ context/      # Context API
        ‚îÇ   ‚îî‚îÄ‚îÄ api/              # Configuraci√≥n Axios
        ‚îî‚îÄ‚îÄ package.json          # Dependencias Node.js
```

## üö¶ Estados del Proyecto

### ‚úÖ Funcionalidades Completadas
- ‚úÖ Sistema de autenticaci√≥n JWT
- ‚úÖ CRUD completo de entidades
- ‚úÖ Sistema de reservas
- ‚úÖ Gesti√≥n de cupones con email
- ‚úÖ Dashboard administrativo
- ‚úÖ Reportes PDF con gr√°ficos
- ‚úÖ Integraci√≥n PayPal
- ‚úÖ Tests unitarios
- ‚úÖ Responsive design

### üõ†Ô∏è Posibles Mejoras
- üìä Notificaciones en tiempo real (WebSockets)
- üì± Aplicaci√≥n m√≥vil con React Native
- üîç Sistema de b√∫squeda avanzada
- üåç Soporte multi-idioma
- üìã Sistema de comentarios y calificaciones
- üîî Notificaciones push

## üë• Contribuci√≥n

Este es un proyecto acad√©mico desarrollado para **Integrador de Sistemas II**. 

### üìù Licencia
Proyecto educativo - Todos los derechos reservados.

### üìß Contacto
- **Desarrollador**: Equipo Integrador de Sistemas II
- **Email**: manuel.24.sco@gmail.com
- **Instituci√≥n**: [Tu Instituci√≥n Educativa]

---

‚≠ê **¬°Gracias por revisar nuestro proyecto!** ‚≠ê
